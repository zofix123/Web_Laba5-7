<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>
    <style>
        .avatar-container {
            margin-bottom: 20px;
        }
        .avatar {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #ddd;
        }
        .default-avatar {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #ddd;
            font-size: 48px;
            color: #999;
        }
    </style>
</head>
<body>

<div style="text-align: right; color: gray; font-size: 0.9em;">
    –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è —Å–µ—Ä–≤–µ—Ä–∞: <span id="serverTime" th:text="${serverTime}"></span>
</div>

<!-- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å -->
<div th:if="${session.user == null}">
    <h2>–í—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã</h2>
    <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, <a th:href="@{/users/login}">–≤–æ–π–¥–∏—Ç–µ</a> –∏–ª–∏ <a th:href="@{/users/register}">–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a>.</p>
</div>

<div th:if="${session.user != null}">
    <h2>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>

    <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ -->
    <div class="avatar-container">
        <div th:if="${session.user.avatar != null}">
            <img th:src="${session.user.avatar}"
                 alt="–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
                 class="avatar">
        </div>
        <div th:if="${session.user.avatar == null}" class="default-avatar">
            üë§
        </div>
        <br>
        <a th:href="@{/users/upload-avatar}">–ò–∑–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä</a>
    </div>

    <p><strong>–ò–º—è:</strong> <span th:text="${session.user.name}"></span></p>
    <p><strong>Email:</strong> <span th:text="${session.user.email}"></span></p>
    <p><strong>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</strong> <span th:text="${session.user.birth}"></span></p>
    <p><strong>–í–æ–∑—Ä–∞—Å—Ç:</strong> <span th:text="${session.user.age}"></span> –ª–µ—Ç</p>

    <!-- –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –ø–æ—Å–µ—â–µ–Ω–∏–π -->
    <p><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–µ—â–µ–Ω–∏–π:</strong>
        <span th:text="${session.user.visitCount}"></span>
    </p>

    <br>
    <a th:href="@{/users/change-password}">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</a>
    <br>
    <br>
    <a th:href="@{/}">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    <br>
    <a th:href="@{/users/logout}">–í—ã–π—Ç–∏</a>
</div>

<script th:src="@{/js/time_fetcher.js}"></script>
</body>
</html>