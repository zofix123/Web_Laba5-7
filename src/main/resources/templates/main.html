<!doctype html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–°–∞–π—Ç –∑–Ω–∞–∫–æ–º—Å—Ç–≤ - –≥–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="/css/styles.css" />
</head>
<body>
<div class="page">
    <header class="header">
        <div class="header__inner">
            <div></div>

            <div class="header__brand">
                <a href="/main">–°–ê–ô–¢ –ó–ù–ê–ö–û–ú–°–¢–í</a>
            </div>

            <nav class="header__nav">
                <a href="/profile">–ü–†–û–§–ò–õ–¨</a>
                <a href="/news">–ù–û–í–û–°–¢–ò</a>
            </nav>
        </div>
    </header>

    <div class="server-time">
        –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è —Å–µ—Ä–≤–µ—Ä–∞: <span id="serverTime" th:text="${serverTime}">‚Äî</span>
    </div>

    <main class="content">
        <section class="status box">
            <div th:if="${session.user == null}">
                <div class="status__text">–í—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã</div>
                <div class="status__actions">
                    <a class="button" th:href="@{/users/register}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                    <a class="button" th:href="@{/users/login}">–í—Ö–æ–¥</a>
                </div>
            </div>

            <div th:if="${session.user != null}">
                <div class="status__text">
                    –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span th:text="${session.user.name}">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>!
                </div>
                <div class="status__text">
                    –í–∞—à —Å—á—ë—Ç—á–∏–∫ –ø–æ—Å–µ—â–µ–Ω–∏–π:
                    <strong th:text="${session.user.visitCount}">0</strong>
                </div>
                <div class="status__actions">
                    <a class="button" th:href="@{/profile}">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
                    <a class="button" th:href="@{/users/logout}">–í—ã–π—Ç–∏</a>
                </div>
            </div>
        </section>

        <section class="viewer"
                 th:with="p=${prevId != null ? prevId : null},
                  n=${nextId != null ? nextId : null}">
            <a class="viewer__arrow"
               th:href="@{/main(id=${p})}"
               aria-label="–ù–∞–∑–∞–¥">‚Üê</a>

            <div class="viewer__frame"></div>

            <a class="viewer__arrow"
               th:href="@{/main(id=${n})}"
               aria-label="–í–ø–µ—Ä—ë–¥">‚Üí</a>
        </section>


        <section class="card">
            <div class="card__photo">
                <img
                        th:if="${candidate != null and candidate.avatar != null and !#strings.isEmpty(candidate.avatar)}"
                        th:src="${candidate.avatar}"
                        alt="–§–æ—Ç–æ"
                        style="width:100%; height:100%; object-fit:cover;"
                />
                <div
                        th:if="${candidate == null or candidate.avatar == null or #strings.isEmpty(candidate.avatar)}"
                        style="width:100%; height:100%; display:flex; align-items:center; justify-content:center; font-size:48px; color:#999;"
                >üë§</div>
            </div>

            <div class="card__meta">
                <div class="card__meta-grid">
                    <div class="card__name"
                         th:text="${candidate != null ? candidate.name : '–ù–µ—Ç –∞–Ω–∫–µ—Ç'}">
                    </div>

                    <div class="card__age"
                         th:text="${candidate != null ? candidate.age + ' –ª–µ—Ç' : ''}">
                    </div>
                </div>
            </div>

            <div class="card__actions">
                <button class="icon-button" type="button" aria-label="–õ–∞–π–∫" th:disabled="${candidate == null}">
                    <img src="/img/like.png" alt="" />
                </button>
                <button class="icon-button" type="button" aria-label="–î–∏–∑–ª–∞–π–∫" th:disabled="${candidate == null}">
                    <img src="/img/dislike.png" alt="" />
                </button>
            </div>
        </section>
    </main>

    <footer class="footer">
        –°–∞–π—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç—ã –≥—Ä—É–ø–ø—ã 24–í–ü1 –ì—Ä–∏–¥–Ω–µ–≤ –í–ª–∞–¥–∏—Å–ª–∞–≤ –∏ –ü–æ–Ω–æ–º–∞—Ä–µ–≤ –ü–∞–≤–µ–ª
    </footer>
</div>

<script src="/js/time_fetcher.js"></script>
</body>
</html>
